<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ticket de Venta</title>
  <style>
    body {
      font-family: monospace;
      font-size: 11px;
      width: 200px;
      margin: 0 auto;
      padding: 5px;
    }
    .center { text-align: center; }
    .bold { font-weight: bold; }
    .line { border-top: 1px dashed #000; margin: 6px 0; }
    table { width: 100%; border-collapse: collapse; }
    td { padding: 2px 0; }
    .right { text-align: right; }
    .header td { font-weight: bold; border-bottom: 1px solid #000; }
  </style>
</head>
<body onload="cargarTicket()">
  <div class="center bold">POS SIS</div>
  <div class="center">Gracias por su compra</div>
  <div class="line"></div>

  <div><b>Cliente:</b> <span id="nomcliente"></span></div>
  <div><b>Venta #:</b> <span id="codigo"></span></div>
  <div class="line"></div>

  <table>
    <tr class="header">
      <td>Producto</td>
      <td>Cant</td>
      <td>P.Unit</td>
      <td>Total</td>
    </tr>
    <tbody id="filas">
      <!-- Aquí se insertarán las filas -->
    </tbody>
  </table>

  <div class="line"></div>
  <div><b>Subtotal:</b> L<span id="subtotal"></span></div>
  <div><b>Descuento:</b> L<span id="impto"></span></div>
  <div class="bold">TOTAL: L<span id="totalventa"></span></div>
  <div class="line"></div>
  <div class="center">¡Vuelva pronto!</div>

  <script>
    function cargarTicket() {
      const params = new URLSearchParams(window.location.search);

      document.getElementById("nomcliente").textContent = params.get("nomcliente") || "";
      document.getElementById("subtotal").textContent = params.get("subtotal") || "";
      document.getElementById("impto").textContent = params.get("impto") || "";
      document.getElementById("totalventa").textContent = params.get("totalventa") || "";
      document.getElementById("codigo").textContent = params.get("codigo") || "";

      const filasHTML = decodeURIComponent(params.get("filas") || "");
      document.getElementById("filas").innerHTML = filasHTML;

      // Imprimir automáticamente al cargar
      window.print();
    }
  </script>
</body>
</html>
